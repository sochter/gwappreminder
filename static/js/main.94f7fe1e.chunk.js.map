{"version":3,"sources":["useAppointments.ts","AppointmentCard.tsx","i18n/Language.tsx","useAppointmentReminder.ts","encrypt.tsx","Login.tsx","SettingsDialog.tsx","App.tsx","settings.ts","reportWebVitals.ts","index.tsx"],"names":["queryAppointments","userCredentials","a","axios","get","auth","username","password","params","startOfToday","dayjs","startOf","toISOString","validateStatus","response","status","type","now","data","map","convertGenesisAppointments","filter","appointment","end","isAfter","Error","id","name","location","start","useStyles","makeStyles","root","minWidth","margin","fontSize","startEnd","textAlign","AppointmentCard","onClick","classes","Card","className","CardContent","Typography","gutterBottom","format","component","color","browserLanguage","navigator","language","startsWith","LanguageContext","createContext","setLanguage","useLanguage","useContext","LanguageProvider","locale","children","useStorageState","localStorage","useLocalStorageLanguage","Provider","value","messages","translationsEn","translationsDe","ALREADY_REMINDED_APPOINTMENT_IDS_KEY","getAlreadyRemindedAppointmentIds","json","sessionStorage","getItem","JSON","parse","e","console","error","appointmentReminderHandler","options","intl","log","minutes","Math","max","diff","subtract","notification","formatMessage","popupNotification","Notification","requestPermission","speechNotification","voice","speechSynthesis","getVoices","lang","utterance","SpeechSynthesisUtterance","speak","setItem","stringify","concat","useFixedTimeout","handleRef","useRef","useIntl","useEffect","current","clearTimeout","undefined","milliseconds","mintesBefore","setTimeout","importPublicKey","pem","pemContents","substring","length","withoutNewLine","replaceAll","binaryDerString","window","atob","binaryDer","str2ab","crypto","subtle","importKey","hash","str","buf","ArrayBuffer","bufView","Uint8Array","i","strLen","charCodeAt","ab2str","buffer","binary","bytes","len","byteLength","String","fromCharCode","btoa","encrypt","text","publicKey","enc","TextEncoder","encode","encodedEncrypted","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","backgroundColor","palette","secondary","main","form","width","submit","Login","loginFailed","onLogin","usernameRef","passwordRef","Container","maxWidth","CssBaseline","Avatar","variant","noValidate","TextField","inputRef","required","fullWidth","label","autoComplete","autoFocus","Button","then","encrypted","FormHelperText","SettingsDialog","settings","open","onClose","onApply","useState","notificationPermission","setNotificationPermission","permission","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","Grid","container","direction","justify","InputLabelProps","shrink","onChange","event","parseInt","target","FormControlLabel","control","Checkbox","checked","DialogActions","createStyles","flexGrow","menuButton","marginRight","title","openInNewTab","url","newWindow","opener","App","setUserCredentials","appointments","loading","loggedIn","authorizationFailed","result","setResult","queryResult","catch","reason","useAppointments","React","settingsOpen","setSettingsOpen","useReminderSettings","reminderSettings","setReminderSettings","sortedAppointments","skipIds","indexOf","useAppointmentReminder","AppBar","position","Toolbar","FormControl","Select","labelId","MenuItem","index","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","localizedFormat","require","extend","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.94f7fe1e.chunk.js","sourcesContent":["import axios from \"axios\";\nimport dayjs, { Dayjs } from \"dayjs\";\nimport { useEffect, useState } from \"react\";\n\nexport interface Appointment {\n  id: string;\n  name: string;\n  start: Dayjs;\n  end: Dayjs;\n  location?: string;\n}\n\nexport interface UseAppointmentsResult {\n  appointments: Appointment[];\n  loading: boolean;\n  loggedIn: boolean;\n  authorizationFailed: boolean;\n}\n\nexport interface UserCredentials {\n  username: string;\n  password: string;\n}\n\nexport const useAppointments = (\n  userCredentials: UserCredentials\n): UseAppointmentsResult => {\n  const [result, setResult] = useState<UseAppointmentsResult>({\n    appointments: [],\n    loading: false,\n    loggedIn: userCredentials.username !== \"\",\n    authorizationFailed: false,\n  });\n\n  useEffect(() => {\n    if (userCredentials.username === \"\") {\n      setResult({\n        appointments: [],\n        loading: false,\n        loggedIn: false,\n        authorizationFailed: false,\n      });\n    } else {\n      queryAppointments(userCredentials)\n        .then((queryResult) => {\n          if (\"type\" in queryResult) {\n            setResult({\n              appointments: [],\n              loading: false,\n              loggedIn: false,\n              authorizationFailed: true,\n            });\n          } else {\n            setResult({\n              appointments: queryResult,\n              loading: false,\n              loggedIn: true,\n              authorizationFailed: false,\n            });\n          }\n        })\n        .catch((reason) => {\n          console.error(\"Failed to query appointments\", reason);\n        });\n    }\n  }, [userCredentials]);\n\n  return result;\n};\n\ninterface GenesisAppointment {\n  id: string;\n  name: string;\n  start: string;\n  end: string;\n  location?: string;\n}\n\ninterface NotAuthenticated {\n  type: \"NotAuthenticated\";\n}\n\nconst SERVICE_URI =\n  process.env.NODE_ENV === \"production\"\n    ? \"https://qc3hx0qepd.execute-api.eu-central-1.amazonaws.com/Prod/appointments/\"\n    : \"http://localhost:3000/appointments/\";\n\nconst queryAppointments = async (\n  userCredentials: UserCredentials\n): Promise<Appointment[] | NotAuthenticated> => {\n  const response = await axios.get<GenesisAppointment[]>(SERVICE_URI, {\n    auth: {\n      username: userCredentials.username,\n      password: userCredentials.password,\n    },\n    params: {\n      startOfToday: dayjs().startOf(\"day\").toISOString(),\n    },\n    validateStatus: () => true,\n  });\n\n  if (response.status === 401) {\n    return {\n      type: \"NotAuthenticated\",\n    };\n  }\n  if (response.status === 200) {\n    const now = dayjs();\n    return response.data\n      .map(convertGenesisAppointments)\n      .filter((appointment) => appointment.end.isAfter(now));\n  }\n  throw Error(\"unexpected status \" + response.status);\n};\n\nconst convertGenesisAppointments = (\n  appointment: GenesisAppointment\n): Appointment => ({\n  id: appointment.id,\n  name: appointment.name,\n  location: appointment.location,\n  start: dayjs(appointment.start),\n  end: dayjs(appointment.end),\n});\n\nconst sample: Appointment[] = [\n  {\n    id: \"#0\",\n    name: \"Daily\",\n    start: dayjs(\"2021-03-22T09:00:00.000Z\"),\n    end: dayjs(\"2021-03-12T10:45:00.000Z\"),\n    location:\n      \"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.\",\n  },\n  {\n    id: \"#1\",\n    name: \"itdesign Town Hall D\",\n    start: dayjs(\"2021-03-22T17:30:00.000Z\"),\n    end: dayjs(\"2021-03-12T07:45:00.000Z\"),\n    location:\n      \"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.\",\n  },\n  {\n    id: \"#2\",\n    name: \"itdesign Town Hall D\",\n    start: dayjs(\"2021-03-22T17:30:00.000Z\"),\n    end: dayjs(\"2021-03-12T07:45:00.000Z\"),\n    location: \"https://teams.microsoft.com/l/channel/....\",\n  },\n  {\n    id: \"#3\",\n    name: \"Guardians of the GraphQL Federation\",\n    start: dayjs(\"2021-03-22T18:30:00.000Z\"),\n    end: dayjs(\"2021-03-12T13:00:00.000Z\"),\n  },\n];\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Appointment } from \"./useAppointments\";\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 600,\n    margin: \"1em\",\n  },\n  name: {\n    fontSize: \"1.5em\",\n  },\n  startEnd: {\n    fontSize: \"1em\",\n  },\n  location: {\n    textAlign: \"left\",\n    fontSize: \"1em\",\n  },\n});\n\nexport const AppointmentCard: React.FC<{\n  appointment: Appointment;\n  onClick: (appointment: Appointment) => void;\n}> = ({ appointment, onClick }) => {\n  const classes = useStyles();\n  return (\n    <Card className={classes.root} onClick={() => onClick(appointment)}>\n      <CardContent>\n        <Typography className={classes.name}>{appointment.name}</Typography>\n        <Typography className={classes.startEnd} gutterBottom>\n          {appointment.start.format(\"LT\")} {appointment.end.format(\"LT\")}\n        </Typography>\n        <Typography\n          className={classes.location}\n          component=\"p\"\n          color=\"textSecondary\"\n        >\n          {appointment.location}\n        </Typography>\n      </CardContent>\n    </Card>\n  );\n};\n","import React, {\n  createContext,\n  Dispatch,\n  SetStateAction,\n  useContext,\n} from \"react\";\nimport { IntlProvider } from \"react-intl\";\nimport { useStorageState } from \"react-storage-hooks\";\nimport translationsEn from \"./translations.json\";\nimport translationsDe from \"./translations_de.json\";\n\nexport type AvailableLanguages = \"de\" | \"en\";\n\nconst browserLanguage = (): AvailableLanguages => {\n  if (navigator.language.startsWith(\"de\")) {\n    return \"de\";\n  }\n  return \"en\";\n};\n\ninterface LanguageContextContent {\n  language: AvailableLanguages;\n  setLanguage: Dispatch<SetStateAction<AvailableLanguages>>;\n}\n\nconst LanguageContext = createContext<LanguageContextContent>({\n  language: \"en\",\n  setLanguage: () => {},\n});\n//export const useAnalytics: () => AvailableLanguages = () => useContext(LanguageContext);\n\nconst useLocalStorageLanguage = (): [\n  AvailableLanguages,\n  Dispatch<SetStateAction<AvailableLanguages>>\n] => {\n  const [language, setLanguage] = useStorageState<string>(\n    localStorage,\n    \"language\",\n    browserLanguage()\n  );\n\n  if (language !== \"de\" && language !== \"en\") {\n    return [\n      browserLanguage(),\n      setLanguage as Dispatch<SetStateAction<AvailableLanguages>>,\n    ];\n  }\n\n  return [\n    language,\n    setLanguage as Dispatch<SetStateAction<AvailableLanguages>>,\n  ];\n};\n\nexport const useLanguage = () => useContext(LanguageContext);\n\nexport const resolveMessages = (\n  locale: string\n): typeof translationsEn | typeof translationsDe => {\n  if (locale.startsWith(\"de\")) {\n    return { ...translationsEn, ...translationsDe };\n  } else {\n    return translationsEn;\n  }\n};\n\nexport const LanguageProvider: React.FunctionComponent<{}> = ({ children }) => {\n  const [language, setLanguage] = useLocalStorageLanguage();\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage }}>\n      <IntlProvider\n        key={language}\n        messages={resolveMessages(language)}\n        locale={language}\n      >\n        {children}\n      </IntlProvider>\n    </LanguageContext.Provider>\n  );\n};\n","import { useEffect, useRef } from \"react\";\nimport dayjs from \"dayjs\";\nimport { Appointment } from \"./useAppointments\";\nimport { IntlShape, useIntl } from \"react-intl\";\nimport { AvailableLanguages, useLanguage } from \"./i18n/Language\";\nimport { ReminderSettings } from \"./settings\";\n\nconst ALREADY_REMINDED_APPOINTMENT_IDS_KEY = \"remindedAppointmentIds\";\n\nconst getAlreadyRemindedAppointmentIds = (): string[] => {\n  try {\n    const json = sessionStorage.getItem(ALREADY_REMINDED_APPOINTMENT_IDS_KEY);\n    if (json === null) {\n      return [];\n    }\n    return JSON.parse(json);\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n};\n\nconst addAlreadyRemindedAppointmentId = (id: string): void => {\n  sessionStorage.setItem(\n    ALREADY_REMINDED_APPOINTMENT_IDS_KEY,\n    JSON.stringify(getAlreadyRemindedAppointmentIds().concat(id))\n  );\n};\n\nexport const useAppointmentReminder = (\n  sortedAppointments: Appointment[],\n  options: ReminderSettings\n) => {\n  const skipIds = getAlreadyRemindedAppointmentIds();\n  console.log(\"skipping\", skipIds);\n  const now = dayjs();\n  const appointments = sortedAppointments\n    .filter((appointment) => skipIds.indexOf(appointment.id) === -1)\n    .filter((appointment) => appointment.end.isAfter(now));\n  useFixedTimeout(options, appointments[0]);\n};\n\nexport const appointmentReminderHandler = async (\n  appointment: Appointment,\n  options: ReminderSettings,\n  language: AvailableLanguages,\n  intl: IntlShape\n): Promise<void> => {\n  console.log(\"entering appointmentReminderhandler\");\n  const now = dayjs();\n  const aFewSecondsBecauseDiffDoesntRound = 10;\n  const minutes = Math.max(\n    appointment.start.diff(\n      now.subtract(aFewSecondsBecauseDiffDoesntRound, \"seconds\"),\n      \"minutes\"\n    ),\n    0\n  );\n\n  const notification = intl.formatMessage(\n    { id: \"notification\" },\n    {\n      minutes: minutes,\n      appointment: appointment.name,\n    }\n  );\n\n  if (options.popupNotification) {\n    console.log(`show popup with notification ${notification}`);\n    const notificationPermission = await Notification.requestPermission();\n    if (notificationPermission === \"granted\") {\n      new Notification(notification);\n    }\n  }\n\n  if (options.speechNotification) {\n    console.log(`speech notification ${notification}`);\n    const voice = speechSynthesis\n      .getVoices()\n      .filter((voice) => voice.lang.startsWith(language))[0];\n\n    const utterance = new SpeechSynthesisUtterance(notification);\n    utterance.voice = voice;\n    speechSynthesis.speak(utterance);\n  }\n\n  addAlreadyRemindedAppointmentId(appointment.id);\n};\n\nconst useFixedTimeout = (\n  options: ReminderSettings,\n  appointment?: Appointment\n) => {\n  const handleRef = useRef<number | undefined>();\n  const intl = useIntl();\n  const { language } = useLanguage();\n\n  useEffect(() => {\n    if (handleRef.current) {\n      console.log(\"cleartimeout\");\n      clearTimeout(handleRef.current);\n      handleRef.current = undefined;\n    }\n\n    if (appointment) {\n      const now = dayjs();\n      const milliseconds = Math.max(\n        appointment.start.diff(now, \"milliseconds\") -\n          options.mintesBefore * 60 * 1000,\n        10\n      );\n      console.log(\"now\", now);\n      console.log(\"appointment.start\", appointment.start);\n      console.log(\"set timeout in milliseconds\", milliseconds, appointment);\n      console.log(\n        \"set timeout in mintes\",\n        milliseconds / 1000 / 60,\n        appointment\n      );\n      handleRef.current = setTimeout(\n        appointmentReminderHandler,\n        milliseconds,\n        appointment,\n        options,\n        language,\n        intl\n      );\n    }\n  }, [language, intl, appointment, options]);\n};\n","const publicKeyPEM = `-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAvs6MzyjUPt9ms4wrEB43\nW8eO1nPR4KYLVsX9oqP22BZnQZIQfbIw5g8iNlS4TmSwgENrxh/eEkKl48OV2VcI\nkWKNa4uELHkivZDCrVqmoomhCgCBBT957a4OBYFaTetHpwREcyiW8aboze8RS8Ar\nBfSoqDeWZ6JRYGsT1N57uaeQutRnewf6djaXSA/GddWo+H+6wRoSXYvrzhU0ooG4\ngby0CTaWe01UX9P3MJ1sbs5eEfKa8gnYC1hA/lMtifHO/vup0jzvHoSfI6inNGDe\nGFA6o8fa1LrkJK5/CCH90aWgJmKNkQymIgfs751lcIymrceM9k788Hmd1WFLE28m\nU30YcbSplad5vCKaUYWk0uFCc+nAG/ZXKJD94HZiQFZW2ZgFUdWCWJUaLTfKi2pF\n1/MByPv0wGjD89hppgueX7sWZplZF3o8AQbsFu0J+a98qDmUDaiajysMJkwxaxHk\no/vONSkkjwFb/j2NDlt302clW46e+c7WTFfTu2UVd+ek30GljpIvgJ+G5PKs4tww\nncjO9icRCY1rEwufSx0SfM5R5zQp/pTbU+vvf9vT87OLCd2pnmqjwSe6Ron8sw7T\nSdDNC/eVGZ20EH6MKDL8N9k79SAiCqwNywM8s7ZgrJAaSt2jgI00itm+UqhFn35l\n039+We5mDRF1bU4rc8iP4pkCAwEAAQ==\n-----END PUBLIC KEY-----`;\n\nconst ALGORITHM = \"RSA-OAEP\";\n\nconst importPublicKey = async (pem: string): Promise<CryptoKey> => {\n  // fetch the part of the PEM string between header and footer\n  const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\n  const pemFooter = \"-----END PUBLIC KEY-----\";\n  const pemContents = pem.substring(\n    pemHeader.length,\n    pem.length - pemFooter.length\n  );\n  const withoutNewLine = pemContents.replaceAll(\"\\n\", \"\").replaceAll(\"\\r\", \"\");\n\n  // base64 decode the string to get the binary data\n  const binaryDerString = window.atob(withoutNewLine);\n  // convert from a binary string to an ArrayBuffer\n  const binaryDer = str2ab(binaryDerString);\n\n  return window.crypto.subtle.importKey(\n    \"spki\",\n    binaryDer,\n    {\n      name: \"RSA-OAEP\",\n      hash: \"SHA-1\",\n      //hash: \"SHA-256\", // FIXME: do not use SHA-1 try stackoverflow.com/questions/49455131/encrypt-in-nodejs-and-decrypt-on-the-client-using-webcrypto-api\n    },\n    true,\n    [\"encrypt\"]\n  );\n};\n\n/*\nConvert a string into an ArrayBuffer\nfrom https://developers.google.com/web/updates/2012/06/How-to-convert-ArrayBuffer-to-and-from-String\n*/\nconst str2ab = (str: string): ArrayBuffer => {\n  const buf = new ArrayBuffer(str.length);\n  const bufView = new Uint8Array(buf);\n  for (let i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\nconst ab2str = (buffer: ArrayBuffer): string => {\n  let binary = \"\";\n  let bytes = new Uint8Array(buffer);\n  let len = bytes.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return window.btoa(binary);\n};\n\n/*\nImport a PEM encoded RSA private key, to use for RSA-PSS signing.\nTakes a string containing the PEM encoded key, and returns a Promise\nthat will resolve to a CryptoKey representing the private key.\n*/\n\nexport const encrypt = async (text: string): Promise<string> => {\n  const publicKey = await importPublicKey(publicKeyPEM);\n  const enc = new TextEncoder();\n\n  const encodedEncrypted = await window.crypto.subtle.encrypt(\n    ALGORITHM,\n    publicKey,\n    enc.encode(text)\n  );\n  return ab2str(encodedEncrypted);\n};\n","import React, { useRef } from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport { FormHelperText } from \"@material-ui/core\";\nimport { encrypt } from \"./encrypt\";\nimport { useIntl } from \"react-intl\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  error: {\n    color: \"red\",\n  },\n}));\n\nexport interface LoginProps {\n  loginFailed: boolean;\n  onLogin: (userCredentials: { username: string; password: string }) => void;\n}\n\nexport const Login = ({ loginFailed, onLogin }: LoginProps) => {\n  const classes = useStyles();\n\n  const usernameRef = useRef<HTMLInputElement>(null);\n  const passwordRef = useRef<HTMLInputElement>(null);\n\n  const onClick = () => {\n    encrypt(passwordRef.current?.value ?? \"\").then((encrypted) => {\n      onLogin({\n        username: usernameRef.current?.value ?? \"\",\n        password: encrypted,\n      });\n    });\n  };\n\n  const intl = useIntl();\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          {intl.formatMessage({ id: \"apptitle\" })}\n        </Typography>\n        <form className={classes.form} noValidate>\n          <TextField\n            inputRef={usernameRef}\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"username\"\n            label=\"Username\"\n            autoComplete=\"username\"\n            autoFocus\n          />\n          <TextField\n            inputRef={passwordRef}\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            label=\"Password\"\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"current-password\"\n          />\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={onClick}\n          >\n            Sign In\n          </Button>\n          {loginFailed && (\n            <FormHelperText className={classes.error}>\n              Username or password wrong\n            </FormHelperText>\n          )}\n        </form>\n      </div>\n    </Container>\n  );\n};\n","import React, { useState } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { ReminderSettings } from \"./settings\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  FormHelperText,\n  Grid,\n  makeStyles,\n} from \"@material-ui/core\";\nimport { useIntl } from \"react-intl\";\n\nexport interface SettingsDialogProps {\n  settings: ReminderSettings;\n  open: boolean;\n  onClose: () => void;\n  onApply: (settings: ReminderSettings) => void;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  error: {\n    color: \"red\",\n  },\n}));\n\nexport const SettingsDialog: React.FC<SettingsDialogProps> = ({\n  settings,\n  open,\n  onClose,\n  onApply,\n}) => {\n  const intl = useIntl();\n  const classes = useStyles();\n  const [notificationPermission, setNotificationPermission] = useState<\n    NotificationPermission | undefined\n  >();\n  Notification.requestPermission().then((permission) => {\n    setNotificationPermission(permission);\n  });\n\n  return (\n    <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">\n        {intl.formatMessage({ id: \"settingsdialog.title\" })}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText></DialogContentText>\n        <Grid\n          container\n          direction=\"column\"\n          justify=\"center\"\n          alignItems=\"flex-start\"\n        >\n          <TextField\n            id=\"standard-number\"\n            label={intl.formatMessage({ id: \"settingsdialog.minutesbefore\" })}\n            type=\"number\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            value={settings.mintesBefore}\n            onChange={(event) => {\n              const value = parseInt(event.target.value);\n              if (value >= 0) {\n                onApply({\n                  ...settings,\n                  mintesBefore: value,\n                });\n              }\n            }}\n          />\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={settings.popupNotification}\n                onChange={(event) =>\n                  onApply({\n                    ...settings,\n                    popupNotification: event.target.checked,\n                  })\n                }\n                name=\"popupNotification\"\n                color=\"primary\"\n              />\n            }\n            label={intl.formatMessage({\n              id: \"settingsdialog.popupnotification\",\n            })}\n          />\n          {settings.popupNotification &&\n            notificationPermission !== undefined &&\n            notificationPermission !== \"granted\" && (\n              <FormHelperText className={classes.error}>\n                Please allow notifications for this page in the browser\n              </FormHelperText>\n            )}\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={settings.speechNotification}\n                onChange={(event) =>\n                  onApply({\n                    ...settings,\n                    speechNotification: event.target.checked,\n                  })\n                }\n                name=\"speechNotification\"\n                color=\"primary\"\n              />\n            }\n            label={intl.formatMessage({\n              id: \"settingsdialog.speechnotification\",\n            })}\n          />\n          <FormHelperText>\n            If you are using chrome, please make sure that you have added this\n            site to the allow section of chrome://settings/content/sound.\n            Otherwise speech synthesis will not work without user interaction on\n            this site. Please note that not all browsers implement speech\n            synthesis. If you do not receive a speech notification, make sure\n            your browser supports it.\n          </FormHelperText>\n        </Grid>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          {intl.formatMessage({\n            id: \"settingsdialog.close\",\n          })}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React, { useEffect } from \"react\";\nimport {\n  Appointment,\n  useAppointments,\n  UserCredentials,\n} from \"./useAppointments\";\nimport { AppointmentCard } from \"./AppointmentCard\";\nimport { useAppointmentReminder } from \"./useAppointmentReminder\";\nimport {\n  AppBar,\n  Button,\n  createStyles,\n  FormControl,\n  makeStyles,\n  MenuItem,\n  Select,\n  Theme,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport { Login } from \"./Login\";\nimport { useStorageState } from \"react-storage-hooks\";\nimport { useIntl } from \"react-intl\";\nimport { useLanguage } from \"./i18n/Language\";\nimport { SettingsDialog } from \"./SettingsDialog\";\nimport { useReminderSettings } from \"./settings\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      flexGrow: 1,\n    },\n  })\n);\n\nfunction App() {\n  const [\n    userCredentials,\n    setUserCredentials,\n  ] = useStorageState<UserCredentials>(sessionStorage, \"userCredentials\", {\n    username: \"\",\n    password: \"\",\n  });\n\n  const { appointments, loggedIn, authorizationFailed } = useAppointments(\n    userCredentials\n  );\n\n  const classes = useStyles();\n  const [settingsOpen, setSettingsOpen] = React.useState(false);\n\n  const [reminderSettings, setReminderSettings] = useReminderSettings();\n\n  useAppointmentReminder(appointments, reminderSettings);\n  const intl = useIntl();\n  const { language, setLanguage } = useLanguage();\n\n  const handleLanguageChange = (\n    event: React.ChangeEvent<{ value: unknown }>\n  ) => {\n    setLanguage(event.target.value as \"en\" | \"de\");\n  };\n\n  useEffect(() => {\n    Notification.requestPermission();\n  });\n\n  if (loggedIn) {\n    return (\n      <div>\n        <header>\n          <>\n            <div className={classes.root}>\n              <SettingsDialog\n                open={settingsOpen}\n                settings={reminderSettings}\n                onClose={() => setSettingsOpen(false)}\n                onApply={setReminderSettings}\n              />\n              <AppBar position=\"static\">\n                <Toolbar>\n                  <Typography\n                    variant=\"h6\"\n                    className={classes.title}\n                  ></Typography>\n                  <Button color=\"inherit\" onClick={() => setSettingsOpen(true)}>\n                    {intl.formatMessage({ id: \"button.settings\" })}\n                  </Button>\n                  <FormControl variant=\"outlined\">\n                    <Select\n                      labelId=\"demo-simple-select-filled-label\"\n                      id=\"demo-simple-select-filled\"\n                      value={language}\n                      onChange={handleLanguageChange}\n                    >\n                      <MenuItem value=\"en\">English</MenuItem>\n                      <MenuItem value=\"de\">Deutsch</MenuItem>\n                    </Select>\n                  </FormControl>\n                  <Button\n                    color=\"inherit\"\n                    onClick={() =>\n                      setUserCredentials({ username: \"\", password: \"\" })\n                    }\n                  >\n                    Logout {userCredentials.username}\n                  </Button>\n                </Toolbar>\n              </AppBar>\n            </div>\n            {appointments.map((appointment, index) => {\n              return (\n                <AppointmentCard\n                  key={index}\n                  appointment={appointment}\n                  onClick={(appointment: Appointment) => {\n                    openInNewTab(\n                      `https://portal.itdesign.de/smartdesign/#!type/appointment/0x${appointment.id}`\n                    );\n                  }}\n                />\n              );\n            })}\n          </>\n        </header>\n      </div>\n    );\n  } else {\n    return (\n      <Login loginFailed={authorizationFailed} onLogin={setUserCredentials} />\n    );\n  }\n}\n\nconst openInNewTab = (url: string) => {\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\");\n  if (newWindow) newWindow.opener = null;\n};\nexport default App;\n","import React from \"react\";\nimport { useStorageState } from \"react-storage-hooks\";\n\nexport interface ReminderSettings {\n  popupNotification: boolean;\n  speechNotification: boolean;\n  mintesBefore: number;\n}\n\nexport const useReminderSettings: () => [\n  ReminderSettings,\n  React.Dispatch<React.SetStateAction<ReminderSettings>>\n] = () => {\n  const [settings, setSettings] = useStorageState<ReminderSettings>(\n    localStorage,\n    \"reminder0\",\n    {\n      popupNotification: true,\n      speechNotification: true,\n      mintesBefore: 5,\n    }\n  );\n\n  return [settings, setSettings];\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport dayjs from \"dayjs\";\nimport { LanguageProvider } from \"./i18n/Language\";\n\nvar localizedFormat = require(\"dayjs/plugin/localizedFormat\");\ndayjs.extend(localizedFormat);\n// trigger voices initialization\nspeechSynthesis.getVoices();\n\nReactDOM.render(\n  <React.StrictMode>\n    <LanguageProvider>\n      <App />\n    </LanguageProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}